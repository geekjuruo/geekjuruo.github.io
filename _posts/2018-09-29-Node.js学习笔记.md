---
layout:     post                    # 使用的布局（不需要改）
title:      Node.js学习笔记	           	# 标题 
subtitle:   未完待续						# 副标题
date:       2018-10-01              # 时间
author:     LYH                      # 作者
header-img: img/post-bg-js-version.jpg    #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               #标签
    - 学习
    - Node.js
---

## Node.js 回调函数
> Node.js 异步编程的直接体现就是回调。  

1. 回调函数在完成任务后就会被调用，Node 使用了大量的回调函数，Node 所有 API 都支持回调函数。  
2. 回调函数一般作为函数的最后一个参数出现

## Node.js 事件循环
> Node.js使用事件驱动模型，当web server接收到请求，就把它关闭然后进行处理，然后去服务下一个web请求。当这个请求完成，它被放回处理队列，当到达队列开头，这个结果被返回给用户。  

**在事件驱动模型中，会生成一个主循环来监听事件，当检测到事件时触发回调函数。**  


## Node.js EventEmitter
1. Node.js所有的异步I/O操作在完成时都会发送一个事件到事件队列
2. Node.js里面的许多对象都会分发事件，所有产生事件的对象都是events.EventEmitter的实例
3. events模块只提供了一个对象：events.EventEmitter，其核心就是事件触发与事件监听器功能的封装。
4. EventEmitter的每个事件由一个事件名和若干个参数组成。对于每个事件，EventEmitter支持若干个事件监听器，事件触发时，这些监听器被依次调用。  

### 继承EventEmitter  
大多数时候我们不会直接使用 EventEmitter，而是在对象中继承它。包括 fs、net、 http 在内的，只要是支持事件响应的核心模块都是 EventEmitter 的子类。

## Node.js Buffer
> JS语言自身只有字符串数据类型，没有二进制数据类型。因此定义一个Buffer类用来创建一个专门存放二进制数据的缓存区。一个Buffer类类似于一个整数数组。

创建Buffer类：alloc，from。  
写入缓冲区：write。  
从缓冲区读取数据：toString。  
将Buffer转换为JSON对象：toJSON。  
缓冲区合并：concat。  
缓冲区比较：compare。  
拷贝缓冲区：copy。  
缓冲区裁剪：slice。  
**详细Buffer类的API可在使用时自行查看**  

## Node.js Stream
> Stream是一个抽象接口，有四种流类型：可读操作，可写操作，可读可写操作，操作被写入数据，然后读出结果。所有的Stream对象都是EventEmitter的实例。

1. 从流中读取数据
2. 写入流
3. 管道流

> 管道提供了一个输出流到输入流的机制。通常我们用于从一个流中获取数据并将数据传递到另外一个流中。

4. 链式流

> 链式是通过连接输出流到另外一个流并创建多个流操作链的机制。链式流一般用于管道操作。

## Node.js 模块系统

**为了让Node.js 的文件能够相互调用，Node.js提供了一个简单的模块系统**

> 模块是Node.js 应用程序的基本组成部分，文件和模块是一一对应的。换言之，一个 Node.js 文件就是一个模块，这个文件可能是JavaScript 代码、JSON 或者编译过的C/C++ 扩展。

Node.js中存在4种模块，各自优先级不同。（下按优先级排列）  

* 从文件模块缓存中加载
* 从原生模块加载
* 从文件加载（相对路径的文件模块，绝对路径的文件模块，非原生模块的文件模块）

## Node.js 函数

JS中，一个函数可以作为另一个函数的参数。也可以在传递参数的地方直接定义函数（匿名函数）。

## Node.js 路由

&#160;&#160;&#160;&#160;我们要为路由提供请求的URL和其他需要的GET及POST参数，随后路由需要根据这些数据来执行相应的代码。因此我们需要查看HTTP请求，从中提取出请求的URL，GET/POST参数。  
&#160;&#160;&#160;&#160;我们需要的所有数据都会包含在request对象中，该对象作为onRequest()回调函数的第一个参数传递。但是为了解析这些数据，我们需要额外的Node.js模块，他们分别是url和querystring模块。  
&#160;&#160;&#160;&#160;**如何把路由和服务器整合起来** 我们的服务器应当知道路由的存在并加以利用，扩展一下服务器的start()函数，以便把路由函数作为参数传递过去。相应的扩展index.js，使得路由函数可以被注入到服务器中。  

## Node.js全局对象

JS中有一个特殊的对象，称为全局对象，它及其所有属性都可以在程序的任何地方访问，即全局变量。  
**__filename**:表示当前正在执行的脚本的文件名。  
**__dirname**:表示当前正在执行的脚本所在的目录。  
**setTimeout**：全局函数在指定的毫秒(ms)数后执行指定函数(cb)。执行一次指定函数。返回一个代表定时器的句柄值。  
**clearTimeout**：全局函数用于停止一个之前通过setTimeout()创建的定时器。参数t是通过setTimeout()函数创建的定时器。  
**setInterval**：全局函数在指定的毫秒(ms)数后执行指定函数(cb)。返回一个代表定时器的句柄值。可以使用clearInterval(t)函数来清除定时器。setInterval()方法会不停地调用函数，直到 clearInterval() 被调用或窗口被关闭。  
**process**:用于描述当前Node.js 进程状态的对象，提供了一个与操作系统的简单接口。通常在你写本地命令行程序的时候，少不了要 和它打交道。  

## Node.js常用工具

util是一个Node.js核心模块，提供常用函数的集合，用于弥补核心JS的功能过于精简的不足。  
**util.inherits**一个实现对象间原型继承的函数。  
**util.inspect**一个将任意对象转换为字符串的方法，通常用于调试和错误输出。  
**util.isArray**如果给定的参数是一个数组返回true。  
**util.isRegExp**如果给定的参数是一个正则表达式返回true。  
**util.isDate**如果给定的参数是一个日期返回true。  
**util.isError**如果给定的参数是一个错误对象返回true。  

## Node.js文件系统

Node.js提供一组类似UNIX（POSIX）标准的文件操作API。  
**异步和同步**Node.js文件系统模块中的方法有异步和同步版本

## Node.js GET/POST请求


